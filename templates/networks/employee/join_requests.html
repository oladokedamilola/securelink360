{% extends "user_base.html" %}

{% block title %}Join Requests{% endblock %}


{% block content %}
<div class="container mt-4">
  <h3>Join Requests</h3>

  <h5 class="mt-3">My Requests</h5>
  <div class="card shadow-sm mb-4">
    <div class="card-body p-0">
      <table class="table mb-0">
        <thead class="table-light">
          <tr>
            <th>Network</th>
            <th>Status</th>
            <th>Requested At</th>
            <th>Decided At</th>
          </tr>
        </thead>
        <tbody>
          {% for req in requests %}
          <tr>
            <td>{{ req.network.name }}</td>
            <td>
              {% if req.status == "pending" %}
                <span class="badge bg-warning">Pending</span>
              {% elif req.status == "approved" %}
                <span class="badge bg-success">Approved</span>
              {% else %}
                <span class="badge bg-danger">Denied</span>
              {% endif %}
            </td>
            <td>{{ req.created_at|date:"Y-m-d H:i" }}</td>
            <td>{{ req.decided_at|date:"Y-m-d H:i"|default:"-" }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="4" class="text-center text-muted py-3">No requests yet.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <h5>Request Access to a Network</h5>
  <form method="post" class="d-flex gap-2">
    {% csrf_token %}
    <select name="network_id" class="form-select" required>
      <option value="">-- Select a Network --</option>
      {% for net in available_networks %}
      <option value="{{ net.id }}">{{ net.name }}</option>
      {% endfor %}
    </select>
    <button type="submit" class="btn btn-primary">Request</button>
  </form>
</div>
{% endblock %}
